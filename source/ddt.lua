-------------------------------------
-- ddt greetings to accession only

local ddt_pal = "0e0e0e111111282828383838484848585858676767777777868686969696a7a7a7b6b6b6c6c6c6d6d6d6e5e5e5f1f1f1"

local ddt_gfx = "8080B3ABABBA2BABABBA5BABABABABABABAB3A5B2ABA2BAABAB2AABAABAB2ABBABA12BA2BA3BBA11BAAB2A7BBAAB3AABBA10BBA6BABABA3BA3BA2BA2BBABAABAABA46BA18BA55BA7BAABA53BAABAB2AABABA17BA22BBABBCCDDBBA39BA4B4A2D2C2BBA233BA155B4A4BBA50BBA39BA14BA6BBABA3BBAB3ABABA3BBABAABAABBABBA2BBAAB2ABA5B2A21BA3B3ABBA2BABA8B2A2BBA2BBA9BAABABA9BA9BBA17BA13BA39BBA47BA23BA13B4A3BBCEA4CEFAABBCDFFABBCDEGGABCCEFGHABCCEGHIBCCEFGGFCEGGHG2EG2H3G2IH2IHHI5HI2JI4JIIJIJIJI2JJIFE2DCCBGGFFEEDCG3FEEDIH2GGFEIIH3GEJI2H2FIJI3HGI2HIHIHBBA5CCA5CCBBA3DDCBA3EDDCBA2FEECCA2E2DCBAAGFEDCCA340BA26BA79B2A3BBAAB2AABBA2BABBA4BAB3A3BBAABAB4ABAAB2ABAABA7BAAB2A2BA2BBA7BAB2A2BA3B2ABBA5B2A2BA6BA15BBA2BA3BA4BAABABA2BABA4B4A16BABA4BA3BA18BA3BA66BA4BA3BCEGIIBBCDFGIIBBCDGHHIACDEFH2ACFEGGHIBDEEFGHJBCEEFHIKACFDFIJJIJIJIJJIJIJIJJIJIIJIJ2KIJ3K2JJKJKKLK5LKLK4LKKJ3K2JI4HHGJKJJIIHGK3JIIHK6JKJIJLKKJKIJKLLKKJJK4IJ3IGFHGFFEDCBBGGE2DCBGE3FDCHGE4DIIGE4I2HFDDEI3HFDEGHI2GEDA15B3A3CBCCA3CBCCBA2C2DBA2CBDEEBAACBDEGDA261BA38BA82BBAABABABAABABAB4A2B2AAB2AB3AABBABBAB2ABABA2B6A3B4AABBA3BA2B2AB3A5BBAABABBAABBABAABA8BBAB2A2BBA3BBA2BAB2ABA5BABAABA3BBAABABA2BABABBA61BA76CEDFIJJACDDGIKKABDDGJKKABDDFJ2ACDDEH2ABCCEFFIAABDFFGHAABCFHFHIJIIJ2IKLKIGH2KJ2G3HEIIGFGGEFIHFGGFJ2GEHJIJJIGFJLLIIHHFHKJHIIHI2JGHIIJKLJG2HJ3GHIIHHGHFEIKJJIIGGFIJJKJHIIGJJKLFEIGJKJKI4GFDJIIH2FDJI2HGEEGHHJIHFDIH2IIGDJJIH2GELKIIH2FLLKJIHIGCBCHFEAACBCHGEAACBCHIECADCBFJGAADCCEHIAADDCCGGBAED2GEBAD2CGEA385BBAABAB2ABBABAABBABA3BABAB2AB2A2B2AB2A2BAB2A2BBA2B3ABBA2B2A8B2A2BBA2BA3BBABABABAABAABABAABBABBABABABABAABBAABABBA8BABBAABBABABBA11BBAB3A2BA30BA16BA45BA4BA20BBA7BABBCEGGHAABCDFGHA2BDGGHBA2CFGHBBAACEFIA3BDGIAB2ADFIBA3CFIHGI2FHIHIKKJHGIHJLKHGGHIKLJHEEFJKLIGFFEJKKHEF2JKJGDEFFJJIFGEF3EEGIJJIFE2FFHHFEFEEFHF3GGFGGHHGFIILHHG2HHKGHI2JIIHIIJ5LKKJIIHIJKKJIJIHHJLKJ2HGHKKJKIMLJIGFJJLMKJGEI3JLJI3JJKKJIIFDDCEFBAFEDCDGBAGDDC2AAGEDCBA2GFDDBBAAHFDCBA2HFDDCBBAGFD2BA385B3A2B3A2BABAB2ABAABBA3BBAB3AAB5AABA3BBAAB8ABABAABABA3BAABBABAABA2BAABBA2BBA2B2AABBAB3AABBAABAABAABAB3ABABA3BA7BAB3AABA3B2AABBA3B3AABBA3BBA41BBA5BBA78BA2BEHBABBAAEHA5CHA5CGA5BEA5BCA6BA7JJIEGFFIIJIGEGHIIJIHGHIHIKJHHIIJHJ2I2JEIIJI3DFHJIIHHBEGIH3I4J3IHHIKJKIIJ2KJ4KJ6KJKIJIJ3KJJIIJJIJ2IJJIIJKKJIJ3IIJJI4GJJIIHHIHJI2H2GJJIIHHGGJJIIHG2JJH2FGHJIGHHG3E2CA2GF2CA2G2ECCAAFHHFCCAAGIHEDDBAGHF2DDBGFFGFD2HEG2DGIA47DCA5GDA325B3A4BBABBABAABBABAAB2ABAB2AB3AAB2ABAB2ABABBAAB4AB3ABBABBAABA3BAABABA2BBABABABAB2ABAB2ABBA3BAB4AABAABAAB2AABAB5ABA2BABABAAB2A3BAB2ABBABABABA2BA5B3AB2A7BBA14BA33BBA120DA5CKBCDGHGHIACDEGFGIABE2FGGA2EFFGGA2CEEFEA3BDDEIJHA2CDNNLGA3IJ2IJKKJJKJIJ2I3HIHIGHHGI3GFHHIIJJGGIHI2JFH2JJIICGIIJ4H2GGHGIHIJHHFI5GGIJIJIJIHIJIJ2I2J4IJKJI3JKLJJHIK2LHGGIGFIH2IIGHIHI5HHIJJI3HKJIJI2HKJ2IIHHKJJIJI2J3I3HGCA4IHFCA3IHGECA2HIIHGFFDHJIG3FIHIIGGFEI9JJK3A31DBA5ECA5IGGECA2JJIIHECA256B2AB4AABBAAB3AB5AB2AB3AAB2A2BBAAB6AABA2B4ABBABBAABBABAABBABAB2A2B3ABBABABBAB2ABABBAB3ABBA3BBAABAB2A2BBA6B5A2BA4BABBAABAAB4A7B2A3BA129DA5GMA5KMA4DLOA3DHNOAABEFJNNADF2KNOCEFGGMOOEFFGJMO2NMJA3NNLHA3OMLIECBAONLGFEBANLJFECAANLIFEA2NMHGCA2OLGEA4DHIJIJIADGHIIHIACGHHIJJAAFHIJKKAACHIKKJAACGJLJGACDFKKFFADFEIKEFIIJJKLLKIJJKLLKMJJKKL2NJ2LKLNKIJKKJMKJFGJJLMJKF2KMKJKGGEIKKJKJ2IJJHIJKJIKIIJ2IKJHIJ3KIIJHJJKJI3JKJI3JJKJ2I2KKJJIIHIJ3K2JJIJK4IJKJJKJ4KJJIIJ2IHI4HI2JJIJJKKJIHIJKKJI2KJJIJIIGJKI2HIHIIHI4HIHGHGHHJIIHIHGGI3H5I5J3KJKJHFDA4HGGEBA2IGFFEA2HIHGGFAAGGHHG2CG4FGGIHHG2FGJJIIHG2A39BA6HBA5GGBA132B2AAB4ABBAABABBABBAABAAB5A3B7A2BBAB3A2BAB5AABBAB3A5B4ABBAB2ABABAABBAB4AABAAB3ABA4BBAB4AABABA3BABAB2ABA4BAAB3ABBA4BAABA6BBA2BBA2BA70CEA4DFFA3BFGEA3DGHIA2BFGKKAABFGJLKAADGIMKLAAFGLMLMFG2KO2FGHIMN2GGHKN3HIJMNNMMKLMN3MLNMMN2MNNMNOON3MNONOMNKFCA3MIDA4MIBA4MIA4CMHA4CMEA4CKDGDAACHHJLKFAFKBFGFDIGFDGGHFDFEEGHGFEEFHG7FGHIIHHGJ2KJ2KL4KKLM5LFFECIJKKF3EFIJFFGHGFG3HHI2JHHI2JJKJ3K3JK3LLKKJKKLKKLJ2I2GFJJIIJKIH3JKKJJKJKLLKKIKKLMMLJILLK2JIILKJHJKKJKJHILKKJHIIJIJ2HJHIJ2KHIJ2K2IJ2K2LIK4LLIJJKKLKIK3LLIJK2LMJJMJK3LLK2L8MLMLMLLM4L2M5JM9LML2MMHJMKEK2JJIIGFLLKKJJHGL2KKJIHML2KKJIML2KKJJLML2KKJML3KKJMKIJK2JFHFCA3FFHECA2FFHGGBAAGFFHIEAAHFFGHGAAIGFGHHCAIGEFHIEAIHFEGHFA128B2A2B2A2BBAB6AAB2AAB2AABBAB4ABBA2BBAAB7AB4AABAAB7A2BABABABBABABAB2AB2ABAABA2BABAB2AB3AABA4BA4BBABBA6BA3BA2BA2BBAABA4BA6BABAABBAABA57CA6EABGIMLLNADILKKMNAFKLJLMNCHJJLMOODHIJNO2FGILNPOOFHILOP2GHGLOP2N2O2NLOOMNOONKONNOONNKOMMONNMKOONONNMKOONONNMLOONNMNNMONNM4HMLLJCELJMMLJEDLMNMLKGCKNNMMKHHFMNMMLIIEMNMLLJJFM3KLKGNMMLKLKHLMMNM2LMMN4MN5ONMNNOON2LNONON2JKJIHHIIA4BBAADEEDEDBLK2LK9IKJK2JHILIJIIHKJMIGEHJMKJIDCKKLKAJNEGKLLAKPLAKLLIHJJLKKJHKKJKLKJK20LKL4KLKML3KKLML3KKLMKKLLKJMMKKJ2MMK2JJKNML2MMNNONMMN3OOMN3ONON2ONOON3O3PLJFKMJFJLKFKLKIGMMKKJLKKN5MMOON4MO4N2O4N2O2NOONNKFFKHGJJIDILFGGFHFKJFHEILJKHGJFJNMMLKKHGM2L2KINM2LLKKNNM2LLKIHFEGHGAG2EFHGBIFFEFGHCG2DEGHCDFDCFGHEHFFBEFHDJIHCEFHEKJHFDEGDA65BA6BA53BABA3BABAB9ABBA4B7AB2A3BAABAABAB2ABBABAAB2ABA3B2ABBA3BAAB4A5B3A2BA3BBAB2A2BBA2B3AABA7BABA4BA4BA2BA2BABABA3BA2BBAB2A4BAABA9CFA4BEGA4DFHA4EHIA3DGHIA2CFHIJA2EH3AAEGIGDDHHFJMNNOHHGHKLMNIHGIJLMMIHGIJKLMIIGHJJKLIHFGJKKLFE2IKLKFFEEFJKLON2MMN3ONMNNOM2N2OOLMLLMMNNL3MMLMLKL6KL12MNNMLJLJHONMLKLJIOOMLMMKHNNMMNNLIM5LILLK2LKJKLKKLKJKL3MKKIDIIHGFDCEH3GEDDFGGFGGFFKNNON2HMO5HMO5JNO2POOMNO5AJONDKLLAJPMFJMLDKPMFJMLNLOMDKLMONKHDKLMOMLGCKMLNMLIAJMMNMLIBILMLMLLKKMNKMLKKLMNLLMLKLMNL2KLMNNLMLKM2OMLKLMN2LKKMMNNOLKMMNNON2O3PO2NO3PNO2POOPNNO3PONO4PPNNOOPOOPO6PO13NNOOPO3NPOPO5PO2NONOPPOPO3POPO2NOPOPO2NOPOOPO2NNMML2KN2MMLLKNNM3LLN3ML2NNMMNMMLON2M2LONNM3LN3M2LKJHGDFGEKKIGDEGDKJIHDEGDKKJHDEGDKKJHEEGDLKJIEDGDLKJIFDFCLKKIGCFBA81BA44BA5B4ABBABAABAABAABA4B2ABBAABABBAABBA6B5ABBABBA3BA2BA4BAB4AABAABAABABAABBAB7AABBA2BABAAB2ABA2BBA2BBA2BA2BBA7BA2CA2BAACDBBA2BDDABAACDDCAACCDCDDADGHGDEFADGHEDFGAEFEDEFHDEDDFEGGECDEFEEGDE2G3DF2G2F3EGF2EFFEEGJLEFEFEFGIFEF5GFEEFFGEF2EF2EG2F2EFG4FFGFGFGFGGFL5MMLML5GIKL4EFFHIJKKFFE3FGEFFEFEFDFEF2EFEFFGEFEEFMLLMLLKILLML2IKL4JFL4JFGLHIIHGDILE2FDDKLFEEDADJLEECABGJKNNO5MNO5N2O4N3O3MN2ONOOMNNO4MN2O3MMN2O3NLKEFLLONMKGCLLNNMKICHKONMLKGCJN2LLIEJNOMMLKGKONNMLKIKONMMLLJJKKMMNNONJLMNNO2KMMNONNOLMN2O2MMONNOOPMN2O2PMN2O2PMNNOPOPPONO7PO2PO3POPO9P3OPO2POPO4PPOOPOOPOPPO2NOPOOPO2POPO3NPO5NO4NO8NO14N3ONNONNONNM3ON3M2ONNMNMMLON2M3ON3MLLON3MMLONNMMNMLN2M2L2KKIGCDBLLKIGBCALKKIGBCBLKKIGBBCLKKIFBCDLLJIFABCLKJIEABBLKJHDABA5BA9BA6BA3BA7BA5BA14BA34BA29BBABAABBAABAB2ABABA2BABBA3B6AB4AABA3BAAB4ABAB8AB2A2BACAB2AABEB5DEA2BACDDB2AAD2BBAABD2AABBCDDCCDED3EDDCFFDEGD2FEDFFCCDFDEGD2EFDGFD2EEG2EDEDFEGEDDFEFDGEDHEGFGF2EFFGFGFGEFDGFFGEGE2GEGGFEFEFGEFFEFEDGGDFE3DFFE2DDEEHDFFGF2EGEF5GGDGF3GGDFGGFFHHFDFGHGEGHGEEFGCEFHHF2CEGFG2HF2EFEEFFEFE4FFGEF4GFGF2EFGFGFFEDG4FDEFG3EFFHGGFEEFFEECAEIJLEDAAHIJKFCADGGJKCACIJIIKFBDJJIIKEAFKIJJKCAHKJKIJBCJKJKIKLMNONO2LLNNONOOLMMNO3LLN3OOLMMNO3LLMNNO2KLN3OOKLMN2ONOONMMLKJOONNLLKKOONNMMKKOONNMMLLO2NNMLLO2NNMMLO4NMLO2N2M2NNOP2OKNOP4JMNOOP2KKNOP3KKMOOP2LJLNOP2LKKNOP2LKKLOP6OONOPPO5P3OONOPPOPOONOP3O2NP3OONNP3O2NP3O5NON2ON8ON20MN2MMNNMN3MNNMN3MNMMN2M3LN2MML2NMNM2LLNM3LLKM2LMLLKNMLMLLKJM2L2KJMML2KKJKKJHCA2KKIGCA2KJHFBA2KJHEA3KIGCA3JIFBABBAJHDAADAAIGBADDA3BAABA21BA2BA2BA3BBA6BABA7BA65B3ABABABAB6A2BAB5ABAB8A2B23CD2BBACDCDDA2BCDCEB2C2DEBBC3DEBBC3EEBCDCD2EBC3DE4FDFEDE2FDFECE2GDFDDEEDFEFEDEFDF2E3DF3E2DE3DFECEEDEDEEGFFEFGDFGGHGHGEGFEFGHGFGEEFFGGEGEDEF5DDE3FFD4EFGFFDCD2FEF3EDFFEDDEFEDF2EDGGDDEFGFG2EDFEFFGGFEEFFEEFFGF2DDE5F4GFDDFGFGEECD3EEFCED2EGDBGFDEEFDDGFEDEDDCGFEEDEFBE3DFFBAGLKJKJKDJLK2JJGKLKJ3IL2KKIJJKL2KJ2LKKLKJIJKL2KJ2KKL2KIKLLMONOOJLMN2OOKKLMN2OKKLMNNOOK2MMN2K2MMNNOK2LMN2K2LMNNO4NNMMO4NNMOOPOONMMOPO2N2O2POONNO3POONO6NNO5NLLKKNP2MLKKMOPPMLLKLOOPM2KKNPPM2LKLOPM2LKLNONMMLLKN3MMLKMOPPOPPOONP2OONONP3O2NP3OONNP2O2NNP3O2NO2POONNOPPNOON3MNMNMMNMNM4NNMNM2LNM3LMLNNM2L2M3LMLKNM2L2KM4LLKLML2KKJLLK2JJIMLLK2JHLK2JJIFLK3JHDK2JJIGBKKJJIHDAKKJIIFACHEAAECAAGCADFA2EABGDA2CAFGBA3CGFA4GGDBA2DHGDA3HHFCA3BAABABA3BA2BA3BA3BABABA6BA4BAABA3BAABA4BBA33BA31B16AAB2AAB10AB3ABABAB4AB4ABA2B2CDC3EECDC2DFEC4DEEC4DEEC4DFEC4DEEC2DCDGEC3DEFEFD2FDDE2DDEFCE3DDFECDF2EDFEDDEEFDEGCE3DEFCE2DDEECCFECDE2DEFGFDDEFDEEF2DEFEFEEGCCEF3EEDCDFFGF2DCFEDEF2D2EDEFE2DEEDCDE3DEEDEF5EEF3EFE2GFE7DED2EDDFDEDEGFEGEEDF2GGEFGEDFGCGGFCDGFDFFDDEGFEED2FGFFEFFDEGFEFGEDFGFG2EDFGEG2EDFGEIJKKL2KJJK3LLIK4LLJK4LLJK4LLKJK4LLKJK3LLKKLKKLKLK2LMMNNKKJLLN2JKJKLMNNJK2LLMMJK3LMNJK2LM2JJK2LMMJIK2LLMO3PO2NO3PPONO3POONNOOPOPONNO2PPON2O3PN3O3MN2O4NMMLKLOONNML2NOONMMLLNO2MMLLMONONMMLMOONNMMLLOON2MKLO2NMMLLO4NNMO5NMOONNONNMNO2NNMMO2N2MMONNONMMLNON2MMLNON2MLLMMLLMK2MML2K2MML2KJJL3KJKJMLLKKJ2L2KJ2ILKKJJIJIKKJJI2HJ2IHDAFJJIHEADIJJIGCAGI2HDAEHHIHFCBHIHHGDAFIH2EADHIHHFCAHIIH2GFCA3HGEBA3HGEBA3GFEBA3GFDA2BBGFCA4GEBA4FEBA9BA5BA3BBAABA3BABA7BA3BABA7BA5B2A9BBA23BA19BA7BBAB4AABAB4ABABBABABAABAABAABAABBAABAABABBAABA2BAABAB3C4EFEC3DEFEC3DDFEBC2DE2CBCCDEEDC3DE2BC2DEEDCBCCDEFDCBDED3CBCDED2CBCCEDDCCBCDCD2CBCCDCCDCBCCD3CBCBD3CBC2D7EEDC4DDEDC2EEDFC2D2EFD3CDFED2CDEFDDC2DFFDCD2EGED2EGFFGGFEGFFG2EEGFG2FDFFGFGFEEF2GF2EEFGEEFGEEGFFEFFEFFGEEFFGFEEFGEIFFDEFGEJFFDEFGEJGEDEFFEIFEDEFGDJEEDEFFEKE3GFFKEDEEF2KKLLKKLKLKLKLKKLK2LKLKKLK7JKL2K7LK3JL2K7LLKIKKL2MLIJKKL2KKIKKL3KIJKKLLKLJIJL2K2IJKKLK2JIKKLKLKKIJKKMMNNO3MMN3OOM2N3OM2N2ONLNMN4LMNMMN2LM2NNONLMMNMNNO3NNMLLO2NNMLLNOONNMLMON2M3OON2MMN4M3ONONNMNMN2MNMNNONNMML2N2MMLLKNNMMLLKKNM2LKKJMNMMLKJINMMLKJJGNML2JIGMMLLKIGFKJIJIIHGJI2HIGEJIHIIHFBH2IHGCAGH2GEAFGHHGEADIH2EBCH2GFCBGIHDAFI2HGADI2HHGCHI2HGFGI2HGFEIHIGHGFDIH2GFDCIHHGFEDCHHGGFECCFDA5ECA5DBA5CA14BA40BABA7BA6BA3BA14B2A66"

function tomem2(str)
  local o=tonumber(str:sub(1,2),16)*256
  local w=tonumber(str:sub(3,4),16)*8-1 
  local e=str:sub(5,str:len()) 
  local d = ""
  for m, c in e:gmatch("(%u+)([^%u]+)") do
    d = d .. m .. (m:sub(-1):rep(c))  
  end
  local y=0
  for x = 1,#d,1 do 
    local c=string.byte(d:sub(x,x))-65
    poke4(o+y+256*64,c)
	y=y+1
    if y>w then y=0 o=o+1024 end
  end
end

ddt_st = 0
function ddt_init()
	poke(0x3FF8,0) -- border
	poke(0x3FF9,0) -- screen offset
	poke(0x3FFA,0)
	tovram(ddt_pal)
	tomem2(ddt_gfx)
	ddt_st = _t
	salad(1,{pineapple,amiga},1000,2000)
	salad(2,{apple,fig},2000,2000)
	salad(4,{amiga},2200,2000)
end

function ddt()
	cls(0)
	rect((240-128)/2,0,128,128,1)
	spr(256,(240-128)/2,0,0,1,0,0,16,16)
	
	local t = (_t-ddt_st)/25
	print('Greetings to Accession only! Fuckings to lamers and Mikucom for bailing on this project half way to work on their own demo for Assembly 2023!', 210-t,130, 12+t/2%3)

	overlay_defaults(_t-ddt_st,"12","LENN")
end

function ddt_bdr(l)
	size=15
	win=math.sin(time()/400)*30+60
	if l>win and l<win+size then
		poke(0x3FC0,math.sin(((l-win)/size)*5-1)*127+127)
	else
		poke(0x3FC0,0)
	end
	win=math.sin(time()/400+1)*30+60
	if l>win and l<win+size then
		poke(0x3FC1,math.sin((l-win)/size*5-1)*127+127)
	else
		poke(0x3FC1,0)
	end
	win=math.sin(time()/400+2)*30+60
	if l>win and l<win+size then
		poke(0x3FC2,math.sin((l-win)/size*5-1)*127+127)
	else
		poke(0x3FC2,0)
	end
end
